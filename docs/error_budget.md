# Error Budget Policy

| Status                  | Published         |
| ----------------------- | ----------------- |
| Author                  | Alice         |
| SRE Approvers           | Charlie           |
| Developer Approvers     | Bob       |
| Product Manager Approvers | Dave         |
| Publish Date            | 2022-07-01        |
| Revisit Date            | 2022-10-31        |

# サービス概要

<!-- SLO Docsと同じくサービス概要を書いておくと良いでしょう -->

# 目的

<!-- 特に導入時期はSREを全員が理解しているわけではないと思うので目的を記載しておくと良いでしょう -->

- サービスの機能開発と、信頼性のバランスを取る
- サービスの信頼性を取り戻し、顧客の信頼性を回復する

# 目的としないこと

<!-- 同じく目的ではないことも記載しておくと良いでしょう -->

- エラーバジェットポリシーは、不足している SLO に対する罰として機能することを意図したものではありません。  

# SLO Miss Policy

<!-- SLOが達成できなかったときのポリシーです -->
<!-- 自分たちで解決できないものは基本的に例外にしますが、冗長化をしていないなどが原因だった場合は当然対応したほうが良いでしょう -->

エラーバジェットを使い切った、使い切りそうになったときは以下のアクションを取る。

- 以下の場合、バグフィックス、パフォーマンス改善など信頼性の回復のためのタスクを最優先とし、新機能などの変更をリリースすることを止める
  - コードによるバグや、アプリケーションエラーによる原因の場合
- ただし、以下の場合は機能開発とリリースを続行できる
  - 計画メンテナンスが原因の場合
  - 通信事業者やクラウドプロバイダー(AWSなど)の障害が原因の場合
  - 別のチームが保守しているサービスで、担当チームが既にリリースを凍結している場合
  - 負荷テストやセキュリティチェックが原因の場合
  - 誤った計測により、ユーザに影響がないものが主な原因だった場合

# Postmortem Policy

<!-- ある程度大きな障害、多発している障害ではしっかり障害を振り返り、再発防止策を検討しましょう -->

- エラーバジェットを短期間で 20%以上消費した障害、または同じ原因で発生した障害については振り返りを実施する
  - 障害振り返り会を設定し、チームで振り返る
  - ポストモーテム(障害報告書と再発防止策)を記載する

# Escalation Policy

<!-- エラーバジェットポリシーの変更や例外にするかどうか判断に迷ったときなどのエスカレーション先を書いておきましょう -->

エラーバジェットの計算またはそれが定義する特定のアクションに関して当事者間で意見の相違がある場合、次回の SLO ドキュメント、エラーバジェットポリシーの作成のためにProduct Manager、SRE、Developerにフィードバックしてください。

# 補足

<!-- まだ整っていないことや仮決めなことなどは補足に書いておきましょう -->

- エラーバジェットの消費した割合などは正確に計測できる仕組みはまだない
- 障害報告、議事録にはエラーバジェット消費原因を記載する
  - 消費原因の種別
    - Binary push
    - Configuration push
    - User behavior change
    - Processing pipeline
    - Service provider change
    - Performance decay
    - Capacity management
    - Hardware
    - Network Failure